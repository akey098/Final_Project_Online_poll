{% extends 'base.html' %}
{% block content %}
<h2>Polls</h2>
<p><a href="{{ url_for('create') }}">Create a New Poll</a></p>
<hr>

{% for poll in polls %}
    <div class="poll">
        <h3>{{ poll.question }}</h3>
        <form method="POST" action="{{ url_for('vote', poll_id=poll.id) }}">
            {% for option in poll.options %}
                {% if poll.is_multiple_choice %}
                    <input type="checkbox" name="choice" value="{{ option.id }}">
                {% else %}
                    <input type="radio" name="choice" value="{{ option.id }}" required>
                {% endif %}
                {{ option.text }}<br>
            {% endfor %}
            <br>
            <button type="submit">Vote</button>
        </form>
        <div class="results">
            {% for option in poll.options %}
                <p><strong>{{ option.text }}</strong>: {{ option.votes }} votes</p>
            {% endfor %}
        </div>
        <hr>
    </div>
{% endfor %}
{% endblock %}
